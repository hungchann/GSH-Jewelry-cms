---
import getPdp from "../../queries/getPdp";
import Layout from "../../layouts/Default.astro";
import ComponentRenderer from "../../components/ComponentRenderer.astro";
import ProductDetail from "../../components/ProductDetail.astro";
import { isPreview } from "../../helpers";

export function getStaticPaths() {
  return [
    { params: { product: "face-serum" } },
    { params: { product: "face-cream" } },
    { params: { product: "eye-contour" } },
    { params: { product: "bundle" } },
  ];
}

const { product } = Astro.params;

const response = await fetch('https://opensheet.elk.sh/1GyEIrrtCg-5Fd9IJPKUBch8zRO4pSXgxsUH4nmKpVkY/2');
const data = await response.json();

const productData = data.find(item => item.slug === product);

---

<Layout>
  <ProductDetail product={productData} />

  <section class="mb-12">
    <ComponentRenderer data={productData.components} />
  </section>
</Layout>
